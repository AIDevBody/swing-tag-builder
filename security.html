<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Security Policy</title>
  <!--
    This page presents the Calendar Editors security & onboarding policy.
    It reuses the same dark theme as other pages and supports basic localisation
    for the page title and the back button. The policy text is provided
    statically below.
  -->
  <style>
    :root {
      --gap: 12px;
      --pad: 14px;
      --radius: 12px;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    }
    body {
      margin: 0;
      padding: 20px;
      background: #0b0f16;
      color: #eaf0ff;
    }
    a { color: #9bcbff; text-decoration: none; }
    .container {
      max-width: 960px;
      margin-left: auto;
      margin-right: auto;
    }
    header {
      margin-bottom: 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: var(--gap);
    }
    h1 {
      margin: 0;
      font-size: 24px;
      color: #d0dbff;
    }
    .lang-container {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .card {
      background: #121827;
      border: 1px solid #1f2a44;
      border-radius: var(--radius);
      padding: var(--pad);
      margin-bottom: var(--gap);
    }
    h2, h3 {
      margin-top: 1em;
      margin-bottom: 0.5em;
      color: #d0dbff;
    }
    p {
      margin-top: 0;
      margin-bottom: 1em;
      line-height: 1.4;
    }
    ul {
      margin-top: 0;
      margin-bottom: 1em;
      padding-left: 20px;
    }
    li { margin-bottom: 0.5em; }
    button {
      background: #1a2540;
      color: #eaf0ff;
      border: 1px solid #2a3f66;
      border-radius: 10px;
      padding: 8px 12px;
      font-size: 14px;
      cursor: pointer;
    }
    button:hover {
      background: #2a3f66;
      border-color: #3c548a;
    }

    /* Floating back button on small screens */
    .floating-btn {
      position: fixed;
      bottom: 16px;
      right: 16px;
      z-index: 1000;
    }
    @media (min-width: 600px) {
      .floating-btn {
        position: static;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header style="display:flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: var(--gap);">
      <button id="backButtonTop">Back</button>
      <div class="lang-container">
        <label id="securityLangLabel" for="lang">Language:</label>
        <select id="lang"></select>
      </div>
      <button id="printButtonTop">Print</button>
    </header>
    <div class="card">
      <!-- English policy content -->
      <article id="policyContentEn">
        <h1>Calendar Editors — Security &amp; Onboarding Policy</h1>
        <p>This document defines how editors can safely use the calendar system. It is maintained by a single maintainer for the good of the community. There is no organisation behind it, but everyone who participates must follow these rules and act responsibly.</p>

        <h2>1. Summary</h2>
        <p>Editor access allows people to create, modify, and publish events on shared calendars that subscribers rely on. Editors can change event details, add descriptions and links, and trigger notifications. Misuse or compromised accounts can create security and trust problems for everyone.</p>
        <p>Every new editor must be introduced by an existing editor, and only Gmail accounts are accepted for editing access. Editors are accountable for their actions, and their sponsors share responsibility for anyone they introduce.</p>

        <h2>2. Key Risks (What Can Go Wrong)</h2>

        <h3>2.1 Phishing and malicious link propagation</h3>
        <p>An editor can publish events containing links in the <code>DESCRIPTION</code> or <code>LOCATION</code> fields. Malicious links could lead to phishing, malware, or credential theft. Subscribers may click these links assuming they are safe.</p>

        <h3>2.2 Impersonation and misinformation</h3>
        <p>Malicious editors could impersonate legitimate organisers, spread false information, or manipulate event details to mislead subscribers.</p>

        <h3>2.3 Data exposure</h3>
        <p>Event descriptions or links might be used to collect subscriber data or share it publicly.</p>

        <h3>2.4 Non‑Gmail account risk</h3>
        <p>Only Gmail accounts are accepted because Gmail accounts are automatically integrated with Google’s security and audit mechanisms. Non‑Gmail accounts can:</p>
        <ul>
          <li>Lack proper identity verification and recovery options.</li>
          <li>Bypass Google’s security policies, 2‑Step Verification, and login tracking.</li>
          <li>Be impersonated more easily, as they might not support full account identity validation.</li>
        </ul>
        <p>For these reasons, any request from a non‑Gmail address will be denied.</p>

        <h2>3. Onboarding Rule: Sponsor‑Based Introductions</h2>
        <p>Every new editor must be introduced and sponsored by an existing editor. The sponsor:</p>
        <ul>
          <li>Confirms the new editor’s identity and Gmail address.</li>
          <li>Ensures the new editor understands the security risks and acceptable use.</li>
          <li>Sends the new editor’s information up the chain to their own sponsor, until it reaches the maintainer who manually adds new editors to the system.</li>
        </ul>
        <p>When sending the new editor’s information, the sponsor must include:</p>
        <ul>
          <li>New editor’s full name</li>
          <li>Gmail address</li>
          <li>Reason for joining (why they need to edit events)</li>
          <li>The calendars they will edit</li>
          <li>Confirmation that they have read this policy and understand the responsibilities</li>
        </ul>
        <p>The maintainer manually reviews and adds the new editor to the system.</p>

        <h2>4. Technical &amp; Procedural Controls</h2>

        <h3>4.1 Notifications and link handling</h3>
        <ul>
          <li>Editors must avoid adding untrusted or suspicious links.</li>
          <li>Descriptions should never contain login forms or links asking for personal information.</li>
        </ul>

        <h3>4.2 Logging and accountability</h3>
        <ul>
          <li>The system automatically tracks who edits what and when.</li>
          <li>Each edit (creation, update, deletion) is logged with the editor’s Gmail identity.</li>
          <li>If misuse occurs, this tracking allows identification of the responsible account.</li>
        </ul>

        <h3>4.3 Least privilege, access review, and reporting</h3>
        <ul>
          <li>Only grant access when needed.</li>
          <li>Remove access for inactive or untrusted editors.</li>
          <li>Each sponsor is responsible for reporting any misuse they become aware of and ensuring that the person responsible is removed from the system.</li>
        </ul>

        <h3>4.4 Responsibility and consequences</h3>
        <p>Each editor is personally responsible for what they post. Sponsors are responsible for verifying that the people they introduce act in good faith. If a person misuses their access:</p>
        <ul>
          <li>Their access will be revoked.</li>
          <li>They will be held personally responsible for any damage or abuse caused.</li>
          <li>Information about the misuse will be retained and, if necessary, provided to authorities.</li>
        </ul>

        <h2>5. Accountability</h2>
        <ul>
          <li>Editors and sponsors are jointly responsible for their actions and the actions of anyone they introduce.</li>
          <li>The maintainer may revoke access at any time in case of misuse or suspicion.</li>
          <li>Serious misuse may lead to reporting to authorities.</li>
        </ul>
      </article>

      <!-- German policy content -->
      <article id="policyContentDe" style="display:none;">
        <h1>Kalender‑Editoren – Sicherheits‑ und Onboarding‑Richtlinie</h1>
        <p>Dieses Dokument definiert, wie Redakteure das Kalendersystem sicher nutzen können. Es wird von einem einzelnen Betreuer zum Wohl der Gemeinschaft gepflegt. Es steht keine Organisation dahinter, aber jeder, der teilnimmt, muss diese Regeln befolgen und verantwortungsvoll handeln.</p>

        <h2>1. Zusammenfassung</h2>
        <p>Der Editorzugang ermöglicht es Personen, Ereignisse in gemeinsamen Kalendern zu erstellen, zu verändern und zu veröffentlichen, auf die sich Abonnenten verlassen. Editoren können Ereignisdetails ändern, Beschreibungen und Links hinzufügen und Benachrichtigungen auslösen. Missbrauch oder kompromittierte Konten können Sicherheits- und Vertrauensprobleme für alle verursachen.</p>
        <p>Jeder neue Editor muss von einem bestehenden Editor eingeführt werden, und es werden nur Gmail-Konten für den Bearbeitungszugang akzeptiert. Editoren sind für ihre Handlungen verantwortlich, und ihre Sponsoren teilen die Verantwortung für jeden, den sie vorstellen.</p>

        <h2>2. Hauptrisiken (Was schiefgehen kann)</h2>

        <h3>2.1 Phishing und Verbreitung bösartiger Links</h3>
        <p>Ein Editor kann Ereignisse mit Links in den Feldern <code>Beschreibung</code> oder <code>Ort</code> veröffentlichen. Bösartige Links können zu Phishing, Malware oder Diebstahl von Zugangsdaten führen. Abonnenten könnten auf diese Links klicken, weil sie davon ausgehen, dass sie sicher sind.</p>

        <h3>2.2 Identitätsdiebstahl und Fehlinformation</h3>
        <p>Böswillige Editoren könnten sich als legitime Organisatoren ausgeben, falsche Informationen verbreiten oder Ereignisdetails manipulieren, um Abonnenten in die Irre zu führen.</p>

        <h3>2.3 Datenoffenlegung</h3>
        <p>Ereignisbeschreibungen oder Links könnten genutzt werden, um Abonnentendaten zu sammeln oder öffentlich zu teilen.</p>

        <h3>2.4 Risiko von Nicht‑Gmail‑Konten</h3>
        <p>Es werden nur Gmail-Konten akzeptiert, weil diese automatisch in die Sicherheits- und Prüfmechanismen von Google integriert sind. Nicht-Gmail-Konten können:</p>
        <ul>
          <li>Keine ordnungsgemäße Identitätsprüfung und Wiederherstellungsoptionen bieten.</li>
          <li>Die Sicherheitsrichtlinien von Google, die 2‑Schritt-Verifizierung und die Login-Verfolgung umgehen.</li>
          <li>Leichter gefälscht werden, da sie möglicherweise keine vollständige Konto-Identitätsprüfung unterstützen.</li>
        </ul>
        <p>Aus diesen Gründen wird jede Anfrage von einer Nicht‑Gmail-Adresse abgelehnt.</p>

        <h2>3. Onboarding‑Regel: Sponsor‑basierte Einführungen</h2>
        <p>Jeder neue Editor muss von einem bestehenden Editor eingeführt und gesponsert werden. Der Sponsor:</p>
        <ul>
          <li>Bestätigt die Identität und Gmail-Adresse des neuen Editors.</li>
          <li>Stellt sicher, dass der neue Editor die Sicherheitsrisiken und die zulässige Nutzung versteht.</li>
          <li>Leitet die Informationen des neuen Editors die Sponsorkette nach oben, bis sie den Betreuer erreichen, der neue Editoren manuell in das System einträgt.</li>
        </ul>
        <p>Beim Versenden der Informationen des neuen Editors muss der Sponsor Folgendes einschließen:</p>
        <ul>
          <li>Vollständiger Name des neuen Editors</li>
          <li>Gmail-Adresse</li>
          <li>Beitrittsgrund (warum er/sie Ereignisse bearbeiten muss)</li>
          <li>Die Kalender, die er/sie bearbeiten wird</li>
          <li>Bestätigung, dass er/sie diese Richtlinie gelesen hat und die Verantwortung versteht</li>
        </ul>
        <p>Der Betreuer prüft manuell und fügt den neuen Editor dem System hinzu.</p>

        <h2>4. Technische und Verfahrenskontrollen</h2>

        <h3>4.1 Benachrichtigungen und Link‑Behandlung</h3>
        <ul>
          <li>Editoren müssen das Hinzufügen von nicht vertrauenswürdigen oder verdächtigen Links vermeiden.</li>
          <li>Beschreibungen dürfen niemals Login-Formulare oder Links enthalten, die nach persönlichen Informationen fragen.</li>
        </ul>

        <h3>4.2 Protokollierung und Verantwortlichkeit</h3>
        <ul>
          <li>Das System zeichnet automatisch auf, wer was und wann bearbeitet.</li>
          <li>Jede Bearbeitung (Erstellung, Aktualisierung, Löschung) wird mit der Gmail-Identität des Editors protokolliert.</li>
          <li>Bei Missbrauch ermöglicht diese Verfolgung die Identifizierung des verantwortlichen Kontos.</li>
        </ul>

        <h3>4.3 Minimale Rechte, Zugriffsüberprüfung und Meldung</h3>
        <ul>
          <li>Zugriff nur gewähren, wenn er benötigt wird.</li>
          <li>Zugriff für inaktive oder nicht vertrauenswürdige Editoren entfernen.</li>
          <li>Jeder Sponsor ist dafür verantwortlich, jeden Missbrauch, von dem er erfährt, zu melden und sicherzustellen, dass die verantwortliche Person aus dem System entfernt wird.</li>
        </ul>

        <h3>4.4 Verantwortung und Konsequenzen</h3>
        <p>Jeder Editor ist persönlich für das verantwortlich, was er veröffentlicht. Sponsoren sind dafür verantwortlich, zu überprüfen, dass die von ihnen eingeführten Personen in gutem Glauben handeln. Wenn eine Person ihren Zugriff missbraucht:</p>
        <ul>
          <li>Wird ihr Zugriff entzogen.</li>
          <li>Wird sie persönlich für verursachte Schäden oder Missbrauch haftbar gemacht.</li>
          <li>Werden Informationen über den Missbrauch gespeichert und gegebenenfalls an die Behörden weitergegeben.</li>
        </ul>

        <h2>5. Verantwortlichkeit</h2>
        <ul>
          <li>Editoren und Sponsoren sind gemeinsam für ihre Handlungen und die Handlungen der Personen verantwortlich, die sie einführen.</li>
          <li>Der Betreuer kann bei Missbrauch oder Verdacht den Zugriff jederzeit entziehen.</li>
          <li>Schwerwiegender Missbrauch kann zu Meldungen an Behörden führen.</li>
        </ul>
      </article>
    </div>
    <div style="display: flex; justify-content: flex-start; gap: 8px; margin-top: 12px;">
      <button id="backButtonBottom" class="floating-btn">Back</button>
      <button id="printButtonBottom">Print</button>
    </div>
  </div>

  <script>
  // Basic localisation for the security page with dual language content
  let currentLang = 'en';
  let strings = {};
  const languages = ['en','de'];

  function loadSavedLang() {
    try {
      const saved = localStorage.getItem('editorGuideLang');
      if (saved) currentLang = saved;
    } catch (err) {}
  }

  async function loadStrings(lang) {
    try {
      const res = await fetch(`resources/local/${lang}/strings.json`, {cache:'no-store'});
      if (!res.ok) throw new Error('failed');
      strings = await res.json();
    } catch (err) {
      console.warn('Could not load strings for', lang);
      if (lang !== 'en') {
        await loadStrings('en');
      }
    }
  }

  function initLanguages() {
    const sel = document.getElementById('lang');
    sel.innerHTML = '';
    languages.forEach(code => {
      const opt = document.createElement('option');
      opt.value = code;
      opt.textContent = code;
      sel.appendChild(opt);
    });
    sel.value = currentLang;
    sel.addEventListener('change', async () => {
      currentLang = sel.value;
      try { localStorage.setItem('editorGuideLang', currentLang); } catch (err) {}
      await loadStrings(currentLang);
      updateText();
    });
  }

  function updateContentLanguage() {
    // show/hide appropriate article based on currentLang
    const enArticle = document.getElementById('policyContentEn');
    const deArticle = document.getElementById('policyContentDe');
    if (!enArticle || !deArticle) return;
    if (currentLang === 'de') {
      enArticle.style.display = 'none';
      deArticle.style.display = '';
    } else {
      enArticle.style.display = '';
      deArticle.style.display = 'none';
    }
  }

  function updateText() {
    // Update labels and button text
    document.getElementById('securityLangLabel').textContent = strings.language_label || 'Language:';
    const backButtons = document.querySelectorAll('#backButtonTop,#backButtonBottom');
    backButtons.forEach(btn => { btn.textContent = strings.back_button || 'Back'; });
    const printButtons = document.querySelectorAll('#printButtonTop,#printButtonBottom');
    // Use provided translation or fallback to "Print" only (no PDF mention)
    printButtons.forEach(btn => { btn.textContent = strings.print_button || 'Print'; });
    updateContentLanguage();
  }

  function attachHandlers() {
    const backButtons = document.querySelectorAll('#backButtonTop,#backButtonBottom');
    backButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        window.location.href = 'index.html';
      });
    });
    const printButtons = document.querySelectorAll('#printButtonTop,#printButtonBottom');
    printButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        printArticle();
      });
    });
  }

  /**
   * Opens a new window containing only the currently visible article
   * and triggers the print dialog. This ensures only the card content
   * (the policy) is printed rather than the whole page.
   */
  function printArticle() {
    const card = document.querySelector('.card');
    if (!card) return;
    let article;
    if (currentLang === 'de') {
      article = document.getElementById('policyContentDe');
    } else {
      article = document.getElementById('policyContentEn');
    }
    if (!article) return;
    const printWindow = window.open('', '', 'width=800,height=600');
    printWindow.document.write('<!doctype html><html><head><meta charset="utf-8"><title>' + (currentLang === 'de' ? 'Drucken' : 'Print') + '</title>');
    // basic styles for print
    printWindow.document.write('<style>body{font-family:system-ui, sans-serif; padding:20px; color:#000;} h1,h2,h3,h4{color:#000;} ul{margin-left:20px;} code{background:#f0f0f0; padding:2px 4px;}</style>');
    printWindow.document.write('</head><body>');
    printWindow.document.write(article.outerHTML);
    printWindow.document.write('</body></html>');
    printWindow.document.close();
    printWindow.focus();
    printWindow.print();
    printWindow.close();
  }

  (async () => {
    loadSavedLang();
    await loadStrings(currentLang);
    initLanguages();
    updateText();
    attachHandlers();
  })();
  </script>
</body>
</html>